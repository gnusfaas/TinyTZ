# TinyTZ

Using IANA time zone database for embedded systems with strict memory requirements and with/without file-system support.

Default build of Time zone database gives a binary database stored in files (zoneinfo/). It is ~2MB in size for supporting ~586 different time zone names. The reference code and the time zone data base are available in the following link: http://www.iana.org/time-zones 
Currently supported version of the Time Zone Data base is 2022a (Released 2022-03-15).

This implementation strips down the original time zone data to few kilo bytes (< 200KB) binary data and avoids the filesystem dependency for use with embedded systems with strict memory constraints. The IANA reference source code is used “as is” from the IANA web site. There are minor Make file changes and a private header file added for removing filesystem dependency.

# Building libtz

./linux_install.sh 

You may need to change the tool chain and target paths in linux_install.sh. On successful installation, libtz and the binary database can be found under the build directory.

The following files are additionally added to the original source, 
Makefile.NEW 
intercept.h 
locale_tz_map.h* 
tzdata.c* 
tzdata_template.c 
tzdata_template.h 
linux_install.sh 
tz-gen-c-db.sh 
tz-strip-db.sh 

The following are the Configuration files for tz-strip-db.sh,
tzr.txt
zn.txt 

A prebuilt version of the original time database is archived in tzdb-2022a-base.tar.gz. The base version of zn.txt configuration file is generated by running 'make zonenames > zn.txt'. Then the required time zones can be enabled in the build by adding a prefix ';;' to the respective line in zn.txt.

After the build is completed, the included and omitted tz names can be found in the following files: 
tz_included.txt*
tz_omitted.txt*

*These files are generated during the build process.
